(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[62],{1569:function(e,t,n){"use strict";var a,r,c=n(24),i=n(22),o=n(25),s=n(1),u=i.default.div(a||(a=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  margin: 8px 0;\n\n  svg {\n    margin: 0 12px 0 4px;\n  }\n"]))),d=Object(i.default)(o.Divider)(r||(r=Object(c.a)(["\n  width: 100%;\n"])));t.a=function(e){var t=e.withArrow;return Object(s.jsxs)(u,{children:[t&&Object(s.jsx)(o.Icon,{type:"arrowDown",size:"md"}),Object(s.jsx)(d,{})]})}},1588:function(e,t,n){"use strict";var a=n(622),r=n(788),c=n(122),i=n(91),o=n(1);t.a=function(e){var t=e.onChange;return Object(o.jsxs)(c.a,{margin:"md",children:[Object(o.jsx)(i.a,{noMargin:!0,children:"If you want to sign the transaction now but manually execute it later, click on the checkbox below."}),Object(o.jsx)(a.a,{control:Object(o.jsx)(r.a,{defaultChecked:!0,color:"primary",onChange:function(e){t(e.target.checked)}}),label:"Execute transaction","data-testid":"execute-checkbox"})]})}},1834:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(35),r=n(1835),c=n.n(r),i=n(0),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Object(i.useRef)(e),o=Object(i.useState)(e),s=Object(a.a)(o,2),u=s[0],d=s[1],l=Object(i.useMemo)((function(){return c()((function(e){return d(e)}),t,n)}),[d,t,n]);return Object(i.useEffect)((function(){if(e!==r.current)return l(e),r.current=e,l.cancel}),[l,e,r]),u}},2779:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o,s,u,d,l,j,b,p,f,O,x,h,m,g,v=n(57),w=n(780),C=n(8),S=n(2),y=n.n(S),A=n(16),k=n(35),T=n(24),E=n(0),I=n(22),L=n(25),D=n(2055),R=n(30),z=n(2060),M=n(436),N=n.n(M),P=n(79),G=n(19),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["https:","http:"];try{var n=new URL(e);return t.includes(n.protocol)}catch(a){return!1}},B=n(153),F=n(361),_=n(23),q=n(346),H=n(567),W=n(1),V=I.default.div(a||(a=Object(T.a)(["\n  padding: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.sm," ").concat(t.margin.lg)})),K=I.default.div(r||(r=Object(T.a)(["\n  display: flex;\n  align-items: center;\n\n  span {\n    margin-right: 4px;\n  }\n"]))),J=I.default.div(c||(c=Object(T.a)(["\n  margin-top: 15px;\n"]))),Y=function(e){var t=e.onTxReject,n=e.onClose,a=e.requestId;return Object(W.jsxs)(V,{children:[Object(W.jsxs)(K,{children:[Object(W.jsx)(L.Icon,{color:"error",size:"md",type:"info"}),Object(W.jsx)(L.Title,{size:"xs",children:"Transaction error"})]}),Object(W.jsx)(L.Text,{size:"lg",children:"This Safe App initiated a transaction which cannot be processed. Please get in touch with the developer of this Safe App for more information."}),Object(W.jsx)(J,{children:Object(W.jsx)(L.ModalFooterConfirmation,{cancelText:"Cancel",handleCancel:function(){return t(a),void n()},handleOk:function(){},okDisabled:!0,okText:"Submit"})})]})},X=n(42),Z=n(82),$=n(463),Q=n(111),ee=n(66),te=n(604),ne=n(1554),ae=n(1545),re=n(1563),ce=n(1560),ie=n(10),oe=n(1567),se=n(275),ue=n.n(se),de=n(163),le=I.default.div(i||(i=Object(T.a)(["\n  display: flex;\n  align-items: center;\n\n  > :nth-child(2) {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.margin})),je=I.default.div(o||(o=Object(T.a)(["\n  margin-bottom: 15px;\n\n  > :nth-child(2) {\n    margin-bottom: 15px;\n  }\n"]))),be=I.default.div(s||(s=Object(T.a)(["\n  width: 100%;\n  max-height: 260px;\n  overflow-y: auto;\n  border-top: 2px solid ",";\n"])),(function(e){return e.theme.colors.separator})),pe=I.default.div(u||(u=Object(T.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  padding: 0 24px;\n  height: 50px;\n  border-bottom: 2px solid ",";\n\n  :hover {\n    cursor: pointer;\n  }\n"])),(function(e){return e.theme.colors.separator})),fe=I.default.div(d||(d=Object(T.a)(["\n  margin-bottom: 15px;\n"]))),Oe=function(e){try{return Array.isArray(e)||(e=e.split(",")),e.reduce((function(e,t){return e+Object(Z.hexToBytes)(t).length}),0)}catch(t){return 0}},xe=function(e){var t=e.txRecipient,n=e.txData,a=e.txValue,r=e.recipientName,c=Object(G.n)();return Object(W.jsxs)(je,{children:[Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(L.Text,{size:"lg",strong:!0,children:"Send ".concat(a," ").concat(c.symbol," to:")}),Object(W.jsx)(de.a,{hash:t,showAvatar:!0,textSize:"lg",showCopyBtn:!0,name:r,explorerUrl:Object(G.i)(t)})]}),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(L.Text,{size:"lg",strong:!0,children:"Data (hex encoded):"}),Object(W.jsxs)(le,{margin:5,children:[Object(W.jsxs)(L.Text,{size:"lg",children:[n?Oe(n):0," bytes"]}),Object(W.jsx)(L.CopyToClipboardBtn,{textToCopy:n})]})]})]})},he=function(e,t){var n;if("address"===e.type&&(n=Object(W.jsx)(de.a,{hash:e.value,showAvatar:!0,textSize:"lg",showCopyBtn:!0,explorerUrl:Object(G.i)(e.value)})),e.type.startsWith("bytes")&&(n=Object(W.jsxs)(le,{margin:5,children:[Object(W.jsxs)(L.Text,{size:"lg",children:[Oe(e.value)," bytes"]}),Object(W.jsx)(L.CopyToClipboardBtn,{textToCopy:e.value})]})),!n){var a=e.value;if(e.type.endsWith("[]"))try{a=JSON.stringify(e.value)}catch(r){}n=Object(W.jsx)(L.Text,{size:"lg",children:a})}return Object(W.jsxs)(fe,{children:[Object(W.jsxs)(L.Text,{size:"lg",strong:!0,children:[e.name," (",e.type,")"]}),n]},t)},me=function(e){var t=e.decodedData,n=e.onTxItemClick;return t?Object(W.jsx)(be,{children:Object(W.jsxs)(pe,{onClick:function(){return n(t)},children:[Object(W.jsx)(L.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),Object(W.jsxs)(le,{margin:20,children:[Object(W.jsx)(L.Text,{size:"xl",children:t.method}),Object(W.jsx)(L.FixedIcon,{type:"chevronRight"})]})]})}):null},ge=function(e){var t=e.decodedData,n=e.onTxItemClick,a=ue()(t,"parameters[0].valueDecoded");return a?Object(W.jsx)(be,{children:a.map((function(e,t){return Object(W.jsxs)(pe,{onClick:function(){return n(e)},children:[Object(W.jsx)(L.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),Object(W.jsxs)(le,{margin:20,children:[e.dataDecoded&&Object(W.jsx)(L.Text,{size:"xl",children:e.dataDecoded.method}),Object(W.jsx)(L.FixedIcon,{type:"chevronRight"})]})]},t)}))}):null},ve=function(e){var t=e.txs,n=e.decodedData,a=e.onTxItemClick;return t.length>1?Object(W.jsx)(ge,{decodedData:n,onTxItemClick:a}):Object(W.jsx)(me,{decodedData:n,onTxItemClick:a})},we=function(){var e=Object(A.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t?void 0:t.length)&&"0x"!==t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,Object(X.getDecodedData)(_.e,Object(G.b)(),t);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),Ce=n(298),Se=n(151),ye=n(177),Ae=n(1569),ke=n(1562),Te=n(244),Ee=n(1588),Ie=I.default.div(l||(l=Object(T.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),ie.md,ie.lg),Le=I.default.div(j||(j=Object(T.a)(["\n  margin: 24px -24px;\n"]))),De=Object(I.default)(Se.a)(b||(b=Object(T.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),Re=function(e){var t=e.app,n=e.txs,a=e.safeAddress,r=e.ethBalance,c=e.safeName,i=e.params,o=e.hidden,s=e.onUserConfirm,u=e.onClose,d=e.onReject,l=e.requestId,j=e.showDecodedTxData,b=n.length>1,p=Object(E.useState)(null),f=Object(k.a)(p,2),O=f[0],x=f[1],h=Object(R.d)(),m=Object(G.n)(),g=Object(G.i)(a),v=Object(R.e)(Te.b),w=Object(E.useMemo)((function(){var e;return b?Object(Q.g)():null===(e=n[0])||void 0===e?void 0:e.to}),[n,b]),C=Object(E.useMemo)((function(){var e;return b?Object(te.a)(n):null===(e=n[0])||void 0===e?void 0:e.data}),[n,b]),S=Object(E.useMemo)((function(){var e,t;return b?"0":(t=null===(e=n[0])||void 0===e?void 0:e.value,Object(Z.toBN)(t).toString())}),[n,b]),T=Object(E.useMemo)((function(){return b?X.Operation.DELEGATE:X.Operation.CALL}),[b]),I=Object(E.useState)("0"),D=Object(k.a)(I,2),z=D[0],M=D[1],N=Object(E.useState)(),P=Object(k.a)(N,2),U=P[0],B=P[1],F=Object(E.useState)(),_=Object(k.a)(F,2),H=_[0],V=_[1],K=Object(ne.b)({txData:C||"",txRecipient:w,operation:T,txAmount:S,safeTxGas:z,manualGasPrice:U,manualGasLimit:H}),J=K.gasLimit,Y=K.gasPriceFormatted,ie=K.gasEstimation,se=K.isOffChainSignature,ue=K.isCreation,le=K.isExecution,je=K.gasCostFormatted,be=K.txEstimationExecutionStatus,pe=Object(oe.a)(be),fe=Object(k.a)(pe,2),Oe=fe[0],he=fe[1],me=Object(E.useState)(!0),ge=Object(k.a)(me,2),Se=ge[0],Re=ge[1],ze=le&&Se;Object(E.useEffect)((function(){var e=function(){var e=Object(A.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(C);case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C]);var Me=function(e){s(e,l),u()};return Object(W.jsx)(re.a,{ethGasLimit:J,ethGasPrice:Y,safeTxGas:Math.max(parseInt(ie),(null===i||void 0===i?void 0:i.safeTxGas)||0).toString(),closeEditModalCallback:function(e){var t=Y,n=e.ethGasPrice,a=ie,r=e.safeTxGas;n&&t!==n&&B(e.ethGasPrice),e.ethGasLimit&&J!==e.ethGasLimit&&V(e.ethGasLimit),r&&a!==r&&M(r)},isOffChainSignature:se,isExecution:ze,children:function(e,i){return Object(W.jsxs)("div",{hidden:o,children:[Object(W.jsx)(ae.a,{title:t.name,iconUrl:t.iconUrl,onClose:d}),Object(W.jsx)(ye.a,{}),Object(W.jsxs)(Ie,{children:[Object(W.jsx)(de.a,{name:c,hash:a,showAvatar:!0,showCopyBtn:!0,explorerUrl:g}),Object(W.jsxs)(De,{children:[Object(W.jsx)(L.Text,{size:"md",children:"Balance:"}),Object(W.jsx)(L.Text,{size:"md",strong:!0,children:"".concat(r," ").concat(m.symbol)})]}),Object(W.jsx)(Ae.a,{withArrow:!0}),Object(W.jsx)(xe,{txRecipient:w,txData:C,txValue:Object(Ce.a)(S,m.decimals)}),Object(W.jsx)(Le,{children:Object(W.jsx)(ve,{txs:n,decodedData:O,onTxItemClick:j})}),!b&&Object(W.jsx)(Ae.a,{}),le&&Object(W.jsx)(Ee.a,{onChange:Re}),Object(W.jsx)(ce.a,{txParameters:e,onEdit:i,isTransactionCreation:ue,isTransactionExecution:ze,isOffChainSignature:se})]}),be===ne.a.LOADING?null:Object(W.jsx)(ke.a,{gasCostFormatted:v?je:void 0,isCreation:ue,isExecution:ze,isOffChainSignature:se,safeNonce:e.safeNonce,txEstimationExecutionStatus:be}),Object(W.jsx)(q.b.Footer,{withoutBorder:be!==ne.a.LOADING,children:Object(W.jsx)(q.b.Footer.Buttons,{cancelButtonProps:{onClick:d},confirmButtonProps:{onClick:function(){return function(e){he(q.a.LOADING),h(Object($.b)({safeAddress:a,to:w,valueInWei:S,txData:C,operation:T,origin:t.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:ee.a.STANDARD_TX,delayExecution:!Se},Me,d)),he(q.a.READY)}(e)},disabled:!v,status:Oe,text:be===ne.a.LOADING?"Estimating":void 0}})})]})}})},ze=n(432),Me=n(568),Ne=n.n(Me),Pe=n(91),Ge=n(122),Ue=Object(I.default)(Pe.a)(p||(p=Object(T.a)(["\n  && {\n    font-size: ",";\n    white-space: nowrap;\n    max-width: 370px;\n    overflow: hidden;\n  }\n"])),ie.lg),Be=I.default.img(f||(f=Object(T.a)(["\n  width: 20px;\n  margin-right: 10px;\n"]))),Fe=I.default.div(O||(O=Object(T.a)(["\n  display: flex;\n  align-items: center;\n"]))),_e=Object(I.default)(Ge.a)(x||(x=Object(T.a)(["\n  padding: "," ",";\n  justify-content: space-between;\n  box-sizing: border-box;\n  max-height: 75px;\n"])),ie.md,ie.lg),qe=Object(I.default)(Ne.a)(h||(h=Object(T.a)(["\n  height: 35px;\n  width: 35px;\n"]))),He=I.default.div(m||(m=Object(T.a)(["\n  margin-right: 15px;\n"]))),We=function(e){var t=e.goBack,n=e.iconUrl,a=e.title,r=e.onClose;return Object(W.jsxs)(_e,{align:"center",grow:!0,children:[Object(W.jsxs)(Fe,{children:[t&&Object(W.jsx)(He,{children:Object(W.jsx)(ze.a,{onClick:t,children:Object(W.jsx)(L.Icon,{type:"arrowLeft",size:"md"})})}),n&&Object(W.jsx)(Be,{alt:a,src:n}),Object(W.jsx)(Ue,{noMargin:!0,weight:"bolder",title:a,children:a})]}),Object(W.jsx)(ze.a,{disableRipple:!0,onClick:r,children:Object(W.jsx)(qe,{})})]})},Ve=I.default.div(g||(g=Object(T.a)(["\n  max-width: 480px;\n  padding: "," ",";\n  word-break: break-word;\n"])),ie.md,ie.lg);var Ke,Je,Ye,Xe,Ze,$e,Qe,et,tt,nt,at,rt,ct,it,ot,st,ut,dt,lt,jt,bt,pt,ft,Ot,xt,ht,mt,gt,vt,wt,Ct,St,yt,At,kt,Tt,Et,It,Lt=function(e){var t,n,a=e.hideDecodedTxData,r=e.onClose,c=e.decodedTxData,i=Object(G.n)();if(void 0!==c.operation){var o,s=Object(Ce.a)(c.value,i.decimals);n=Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(xe,{txRecipient:c.to,txData:c.data,txValue:s}),null===(o=c.dataDecoded)||void 0===o?void 0:o.parameters.map((function(e,t){return he(e,t)}))]})}else n=Object(W.jsx)(W.Fragment,{children:c.parameters.map((function(e,t){return he(e,t)}))});return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(We,{title:(null===(t=c.dataDecoded)||void 0===t?void 0:t.method)||c.method,onClose:r,goBack:a}),Object(W.jsx)(ye.a,{}),Object(W.jsx)(Ve,{children:n})]})},Dt=function(e){var t=Object(E.useState)(),n=Object(k.a)(t,2),a=n[0],r=n[1],c=!e.txs.length||e.txs.some((function(e){return!function(e){return!!["string","number"].includes(typeof e.value)&&!("string"===typeof e.value&&!/^(0x)?[0-9a-f]+$/i.test(e.value))&&void 0===Object(H.k)(e.to)&&!!e.data&&"string"===typeof e.data}(e)})),i=r,o=function(){return r(void 0)},s=function(){e.onClose(),e.onTxReject(e.requestId)};return c?Object(W.jsx)(q.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:Object(W.jsx)(Y,Object(C.a)({},e))}):Object(W.jsxs)(q.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:[a&&Object(W.jsx)(Lt,{onClose:function(){o(),s()},hideDecodedTxData:o,decodedTxData:a}),Object(W.jsx)(Re,Object(C.a)(Object(C.a)({},e),{},{onReject:s,showDecodedTxData:i,hidden:!!a}))]})},Rt=n(409),zt=n(582),Mt=n(7),Nt=n(27),Pt=function e(t,n){var a=this;Object(Mt.a)(this,e),this.iframeRef=void 0,this.handlers=new Map,this.app=void 0,this.on=function(e,t){a.handlers.set(e,t)},this.isValidMessage=function(e){var t=e.source.parent===window.parent,n=Object.values(D.Methods).includes(e.data.method);return t&&n},this.canHandleMessage=function(e){return Boolean(a.handlers.get(e.data.method))},this.send=function(e,t){var n,r,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(D.getSDKVersion)(),o=c?D.MessageFormatter.makeErrorResponse(t,e,i):D.MessageFormatter.makeResponse(t,e,i);null===(n=a.iframeRef.current)||void 0===n||null===(r=n.contentWindow)||void 0===r||r.postMessage(o,"*")},this.handleIncomingMessage=function(){var e=Object(A.a)(y.a.mark((function e(t){var n,r,c,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.isValidMessage(t),r=a.canHandleMessage(t),!n||!r){e.next=15;break}return c=a.handlers.get(t.data.method),e.prev=4,e.next=7,c(t);case 7:"undefined"!==typeof(i=e.sent)&&a.send(i,t.data.id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),a.send(e.t0.message,t.data.id,!0),Object(Nt.d)(Nt.b._901,e.t0.message,{contexts:{safeApp:a.app,request:t.data}});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),this.clear=function(){window.removeEventListener("message",a.handleIncomingMessage)},this.iframeRef=t,this.app=n,window.addEventListener("message",this.handleIncomingMessage)},Gt=n(781),Ut=n(606),Bt=n(347),Ft={isOpen:!1,message:"",requestId:""},_t=n(63),qt=n(32),Ht=n(46),Wt=n(624),Vt=I.default.div(Ke||(Ke=Object(T.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),ie.md,ie.lg),Kt=Object(I.default)(Se.a)(Je||(Je=Object(T.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),Jt=Object(I.default)(Wt.a)(Ye||(Ye=Object(T.a)(["\n  &.MuiFormControl-root {\n    padding-bottom: ",";\n  }\n"])),(function(e){return e.theme.margin.md})),Yt=Object(I.default)(Pe.a)(Xe||(Xe=Object(T.a)(["\n  display: flex;\n  align-items: center;\n\n  > span:first-child {\n    margin-right: ",";\n  }\n"])),(function(e){return e.theme.margin.xs})),Xt=function(e){var t=e.app,n=e.safeAddress,a=e.ethBalance,r=e.safeName,c=e.onUserConfirm,i=e.onClose,o=e.onTxReject,s=e.requestId,u=e.utf8Message,d=e.txData,l=e.txRecipient,j=Object(R.d)(),b=Object(G.i)(n),p=Object(G.n)(),f=Object(R.e)(Te.b),O=Object(E.useState)("0"),x=Object(k.a)(O,2),h=x[0],m=x[1],g=Object(E.useState)(),v=Object(k.a)(g,2),w=v[0],C=v[1],S=Object(E.useState)(),y=Object(k.a)(S,2),A=y[0],T=y[1],I=Object(ne.b)({txData:d||"",txRecipient:l,operation:X.Operation.DELEGATE,txAmount:"0",safeTxGas:h,manualGasPrice:w,manualGasLimit:A}),D=I.gasLimit,z=I.gasPriceFormatted,M=I.gasEstimation,N=I.isOffChainSignature,P=I.isCreation,U=I.isExecution,B=I.gasCostFormatted,F=I.txEstimationExecutionStatus,_=Object(oe.a)(F),H=Object(k.a)(_,2),V=H[0],K=H[1],J=function(){o(s),i()},Y=function(e){c(e,s),i()};return Object(W.jsx)(re.a,{ethGasLimit:D,ethGasPrice:z,safeTxGas:M,closeEditModalCallback:function(e){var t=z,n=e.ethGasPrice,a=M,r=e.safeTxGas;n&&t!==n&&C(e.ethGasPrice),e.ethGasLimit&&D!==e.ethGasLimit&&T(e.ethGasLimit),r&&a!==r&&m(r)},isOffChainSignature:N,isExecution:U,children:function(e,c){return Object(W.jsxs)("div",{children:[Object(W.jsx)(We,{title:t.name,iconUrl:t.iconUrl,onClose:J}),Object(W.jsx)(ye.a,{}),Object(W.jsxs)(Vt,{children:[Object(W.jsx)(de.a,{name:r,hash:n,showAvatar:!0,showCopyBtn:!0,explorerUrl:b}),Object(W.jsxs)(Kt,{children:[Object(W.jsx)(L.Text,{size:"md",children:"Balance:"}),Object(W.jsx)(L.Text,{size:"md",strong:!0,children:"".concat(a," ").concat(p.symbol)})]}),Object(W.jsx)(Ae.a,{withArrow:!0}),Object(W.jsx)(xe,{txRecipient:l,txData:d,txValue:"0",recipientName:"SignMessageLib"}),Object(W.jsx)(L.Text,{size:"lg",strong:!0,children:"Signing message:"}),Object(W.jsx)(Jt,{rows:"2",multiline:!0,disabled:!0,fullWidth:!0,label:"Message to sign",inputProps:{type:"text",value:u,name:"Message to sign",onChange:function(){},placeholder:""},InputProps:{disableUnderline:!0}}),Object(W.jsxs)(Yt,{children:[Object(W.jsx)(L.Icon,{size:"md",type:"info",color:"warning"}),"Signing a message with the Gnosis Safe requires a transaction on the blockchain"]}),Object(W.jsx)(ce.a,{txParameters:e,onEdit:c,isTransactionCreation:P,isTransactionExecution:U,isOffChainSignature:N})]}),F===ne.a.LOADING?null:Object(W.jsx)(ke.a,{gasCostFormatted:f?B:void 0,isCreation:P,isExecution:U,isOffChainSignature:N,safeNonce:e.safeNonce,txEstimationExecutionStatus:F}),Object(W.jsx)(q.b.Footer,{withoutBorder:F!==ne.a.LOADING,children:Object(W.jsx)(q.b.Footer.Buttons,{cancelButtonProps:{onClick:J},confirmButtonProps:{onClick:function(){return function(e){K(q.a.LOADING),j(Object($.b)({safeAddress:n,to:l,valueInWei:"0",txData:d,operation:X.Operation.DELEGATE,origin:t.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:ee.a.STANDARD_TX},Y,J)),K(q.a.READY)}(e)},disabled:!f,status:V,text:F===ne.a.LOADING?"Estimating":void 0}})})]})}})},Zt=n(52),$t=["message","isOpen"],Qt=function(e){var t=e.message,n=e.isOpen,a=Object(_t.a)(e,$t),r=Object(qt.i)(),c=Object(R.e)(Zt.a),i=Object(Q.k)(c)||Ht.a,o=Object(Q.l)(r,c).methods.signMessage(r.eth.accounts.hashMessage(t)).encodeABI(),s=function(e){var t=Object(Z.isHexStrict)(e.toString()),n=e;if(t)try{n=Object(Z.hexToUtf8)(e)}catch(a){}return n}(t);return Object(W.jsx)(q.c,{description:"Safe App transaction",title:"Safe App transaction",open:n,children:Object(W.jsx)(Xt,Object(C.a)(Object(C.a)({},a),{},{txRecipient:i,txData:o,utf8Message:s}))})},en=I.default.div(Ze||(Ze=Object(T.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  margin: 0 -16px;\n"]))),tn=Object(I.default)(L.Card)($e||($e=Object(T.a)(["\n  flex-grow: 1;\n  padding: 0;\n  border-radius: 0;\n"]))),nn=I.default.iframe(Qe||(Qe=Object(T.a)(["\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  box-sizing: border-box;\n  display: ",";\n"])),(function(e){return e.isLoading?"none":"block"})),an={isOpen:!1,txs:[],requestId:"",params:void 0},rn=new N.a.providers.HttpProvider(Object(G.q)(),{timeout:1e4}),cn=function(e){var t=e.appUrl,n=Object(R.e)(P.a),a=n.address,r=n.ethBalance,c=n.owners,i=n.threshold,o=Object(G.e)(),s=o.nativeCurrency,u=o.chainId,d=o.chainName,l=o.shortName,j=Object(R.e)((function(e){return Object(Bt.a)(e,{address:a})})),b=Object(B.i)().trackEvent,p=Object(E.useRef)(null),f=Object(E.useState)(an),O=Object(k.a)(f,2),x=O[0],h=O[1],m=Object(E.useState)(!0),g=Object(k.a)(m,2),v=g[0],w=g[1],S=Object(E.useState)((function(){return Object(zt.e)(t)})),T=Object(k.a)(S,2),I=T[0],M=T[1],N=function(){var e=Object(E.useState)(Ft),t=Object(k.a)(e,2),n=t[0],a=t[1];return[n,Object(E.useCallback)((function(e,t){a(Object(C.a)(Object(C.a)({},Ft),{},{isOpen:!0,message:e,requestId:t}))}),[]),Object(E.useCallback)((function(){a(Ft)}),[])]}(),U=Object(k.a)(N,3),q=U[0],H=U[1],V=U[2],K=Object(E.useRef)(),J=Object(E.useState)(!1),Y=Object(k.a)(J,2),X=Y[0],Z=Y[1],$=Object(E.useRef)(),Q=Object(E.useState)(!1),ee=Object(k.a)(Q,2)[1];Object(E.useEffect)((function(){var e=function(){clearTimeout(K.current),clearTimeout($.current)};return v?(K.current=window.setTimeout((function(){Z(!0)}),_.q),$.current=window.setTimeout((function(){ee((function(){throw Error("There was an error loading the Safe App. There might be a problem with the App provider.")}))}),3e4)):(e(),Z(!1)),function(){e()}}),[v]);var te=Object(E.useCallback)((function(e,t,n){return h({isOpen:!0,txs:e,requestId:n,params:t})}),[h]),ne=Object(E.useCallback)((function(){return h(an)}),[h]),ae=function(e,t,n,a){var r=Object(Rt.useSnackbar)(),c=r.enqueueSnackbar,i=r.closeSnackbar,o=Object(R.e)(P.j),s=o.address,u=o.ethBalance,d=o.name,l=Object(R.d)(),j=Object(E.useCallback)((function(t,n){var r,c,i=Object(C.a)(Object(C.a)({},t),{},{requestId:n||Math.trunc(window.performance.now()),version:"0.4.2"});a&&e&&(null===(r=a.current)||void 0===r||null===(c=r.contentWindow)||void 0===c||c.postMessage(i,e.url))}),[a,e]);return Object(E.useEffect)((function(){var n=function(e,n,a){if(e)switch(e){case z.SDK_MESSAGES.SEND_TRANSACTIONS:n&&t(n,void 0,a);break;case z.SDK_MESSAGES.SAFE_APP_SDK_INITIALIZED:var r={messageId:z.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:s,network:Object(G.f)().toLowerCase(),ethBalance:u}},c={messageId:z.INTERFACE_MESSAGES.ENV_INFO,data:{txServiceUrl:Object(G.s)()}};j(r),j(c);break;default:console.error("ThirdPartyApp: A message was received with an unknown message id ".concat(e,"."))}},a=function(){var t=Object(A.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.origin!==window.origin){t.next=2;break}return t.abrupt("return");case 2:if(null===e||void 0===e?void 0:e.url.includes(a.origin)){t.next=5;break}return console.error("ThirdPartyApp: A message was received from an unknown origin ".concat(a.origin)),t.abrupt("return");case 5:n(a.data.messageId,a.data.data,a.data.requestId);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}),[n,i,l,c,u,t,s,d,e,j]),{sendMessageToIframe:j}}(I,te,ne,p),re=ae.sendMessageToIframe,ce=Object(E.useCallback)((function(){var e=p.current;e&&function(e,t){try{var n=new URL(e),a=new URL(t);return n.href===a.href}catch(r){return!1}}(e.src,t)&&(w(!1),re({messageId:z.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:a,network:Object(G.f)().toLowerCase(),ethBalance:r}}))}),[r,a,t,re]),ie=function(e,t){var n=Object(E.useState)(void 0),a=Object(k.a)(n,2),r=a[0],c=a[1];return Object(E.useEffect)((function(){var n;return t&&function(e,t){n=new Pt(e,t),c(n)}(e,t),function(){var e;null===(e=n)||void 0===e||e.clear()}}),[t,e]),r}(p,I);Object(E.useEffect)((function(){null===ie||void 0===ie||ie.on("getEnvInfo",(function(){return{txServiceUrl:Object(G.s)()}})),null===ie||void 0===ie||ie.on(D.Methods.getTxBySafeTxHash,function(){var e=Object(A.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,a=n.safeTxHash,e.next=3,Object(Ut.a)(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(D.Methods.getSafeInfo,(function(){return{safeAddress:a,network:d,chainId:parseInt(u,10),owners:c,threshold:i}})),null===ie||void 0===ie||ie.on(D.Methods.getSafeBalances,function(){var e=Object(A.a)(y.a.mark((function e(t){var n,r,c,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,r=n.currency,c=void 0===r?"usd":r,e.next=3,Object(Gt.a)({safeAddress:a,selectedCurrency:c});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(D.Methods.rpcCall,function(){var e=Object(A.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,e.prev=1,a=new Promise((function(e,t){rn.send({jsonrpc:"2.0",method:n.call,params:n.params,id:"1"},(function(n,a){(n||(null===a||void 0===a?void 0:a.error))&&t(n||(null===a||void 0===a?void 0:a.error)),e(null===a||void 0===a?void 0:a.result)}))})),e.abrupt("return",a);case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(D.Methods.sendTransactions,(function(e){te(e.data.params.txs,e.data.params.params,e.data.id)})),null===ie||void 0===ie||ie.on(D.Methods.signMessage,function(){var e=Object(A.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data.params,a=n.message,H(a,t.data.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(D.Methods.getChainInfo,Object(A.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{chainName:d,chainId:u,shortName:l,nativeCurrency:s});case 1:case"end":return e.stop()}}),e)}))))}),[ie,te,a,c,i,H,s,u,d,l]);var oe=function(e,t){re({messageId:z.INTERFACE_MESSAGES.TRANSACTION_CONFIRMED,data:{safeTxHash:e}},x.requestId),null===ie||void 0===ie||ie.send({safeTxHash:e},t)},se=function(e){re({messageId:z.INTERFACE_MESSAGES.TRANSACTION_REJECTED,data:{}},x.requestId),null===ie||void 0===ie||ie.send("Transaction was rejected",e,!0)};return Object(E.useEffect)((function(){if(!t)throw Error("App url No provided or it is invalid.");var e=function(){var e=Object(A.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(zt.d)(t);case 3:n=e.sent,M(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(Nt.c)(Nt.b._900,"".concat(t,", ").concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(E.useEffect)((function(){I&&b(Object(C.a)(Object(C.a)({},B.b.SAFE_APP),{},{label:I.name}))}),[I,b]),Object(W.jsxs)(en,{children:[Object(W.jsxs)(tn,{children:[v&&Object(W.jsxs)(F.a,{style:{flexDirection:"column"},children:[X&&Object(W.jsx)(L.Title,{size:"xs",children:"The Safe App is taking too long to load, consider refreshing."}),Object(W.jsx)(L.Loader,{size:"md"})]}),Object(W.jsx)(nn,{isLoading:v,frameBorder:"0",id:"iframe-".concat(t),ref:p,src:t,title:I.name,onLoad:ce})]}),Object(W.jsx)(Dt,{isOpen:x.isOpen,app:I,safeAddress:a,ethBalance:r,safeName:j,txs:x.txs,onClose:ne,requestId:x.requestId,onUserConfirm:oe,params:x.params,onTxReject:se}),Object(W.jsx)(Qt,{isOpen:q.isOpen,app:I,safeAddress:a,ethBalance:r,safeName:j,onClose:V,requestId:q.requestId,message:q.message,onUserConfirm:oe,onTxReject:se})]})},on=n(2777),sn=n(2791),un=n(779),dn=n(110),ln=n(96),jn=n(2738),bn=n.n(jn),pn=n(2063),fn=n.n(pn),On=n(316),xn=n.p+"static/media/addApp.4a0829b7.svg",hn=n(360),mn=n(770),gn=Object(I.keyframes)(et||(et=Object(T.a)(["\n  0% {\n    background-position: 0% 54%;\n  }\n  50% {\n    background-position: 100% 47%;\n  }\n  100% {\n    background-position: 0% 54%;\n  }\n"]))),vn=I.default.div(tt||(tt=Object(T.a)(["\n  height: 60px;\n  width: 60px;\n  border-radius: 30px;\n  margin: 0 auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),gn),wn=I.default.div(nt||(nt=Object(T.a)(["\n  height: 24px;\n  width: 160px;\n  margin: 24px auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),gn),Cn=I.default.div(at||(at=Object(T.a)(["\n  height: 16px;\n  width: 200px;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),gn),Sn=Object(I.default)(L.Card)(rt||(rt=Object(T.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-evenly;\n  box-shadow: 1px 2px 10px 0 ",";\n  height: 232px !important;\n  box-sizing: border-box;\n  cursor: pointer;\n  color: ",";\n\n  :hover {\n    box-shadow: 1px 2px 16px 0 ",";\n    transition: box-shadow 0.3s ease-in-out;\n    background-color: ",";\n    cursor: pointer;\n\n    h5 {\n      color: ",";\n    }\n  }\n"])),(function(e){var t=e.theme;return Object(On.alpha)(t.colors.shadow.color,.18)}),(function(e){return e.theme.colors.secondary}),(function(e){var t=e.theme;return Object(On.alpha)(t.colors.shadow.color,.35)}),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.primary})),yn=Object(I.default)(ze.a)(ct||(ct=Object(T.a)(["\n  &.MuiButtonBase-root {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 10;\n    padding: 5px;\n    opacity: 0;\n\n    transition: opacity 0.2s ease-in-out;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),An=Object(I.default)(on.a.div)(it||(it=Object(T.a)(["\n  position: relative;\n\n  &:hover {\n    "," {\n      opacity: 1;\n    }\n  }\n"])),yn),kn=I.default.img(ot||(ot=Object(T.a)(["\n  width: ",";\n  height: ",";\n  margin-top: ",";\n  object-fit: contain;\n"])),(function(e){return"md"===e.size?"60px":"102px"}),(function(e){return"md"===e.size?"60px":"92px"}),(function(e){return"md"===e.size?"0":"-16px"})),Tn=Object(I.default)(L.Title)(st||(st=Object(T.a)(["\n  text-align: center;\n  margin: 16px 0 9px 0;\n"]))),En=Object(I.default)(L.Text)(ut||(ut=Object(T.a)(["\n  text-align: center;\n  height: 72px;\n  line-height: 24px;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n"]))),In=Object(I.default)(ln.a)(dt||(dt=Object(T.a)(["\n  text-decoration: none;\n"]))),Ln=function(e){e.currentTarget.onerror=null,e.currentTarget.src=mn.a},Dn=function(e,t){return t?"Unpin ".concat(e):"Pin ".concat(e)},Rn=function(e){var t=e.app,n=e.iconSize,a=void 0===n?"md":n,r=e.to,c=e.onPin,i=e.onRemove,o=e.pinned,s=void 0!==o&&o;if(function(e){return hn.a.LOADING===e.fetchStatus}(t))return Object(W.jsx)(An,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(W.jsxs)(Sn,{children:[Object(W.jsx)(vn,{}),Object(W.jsx)(wn,{}),Object(W.jsx)(Cn,{}),Object(W.jsx)(Cn,{})]})});var u=Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(Sn,{children:[Object(W.jsx)(kn,{alt:"".concat(t.name||"App"," Logo"),src:t.iconUrl,onError:Ln,size:a}),Object(W.jsx)(Tn,{size:"xs",children:t.name}),Object(W.jsxs)(En,{size:"lg",children:[t.description," "]})]}),c&&Object(W.jsx)(yn,{"aria-label":Dn(t.name,s),title:Dn(t.name,s),onClick:function(e){e.preventDefault(),c(t)},children:s?Object(W.jsx)(bn.a,{}):Object(W.jsx)(fn.a,{})}),i&&Object(W.jsx)(yn,{"aria-label":"Remove an app",title:"Remove app",onClick:function(e){e.preventDefault(),i(t)},children:Object(W.jsx)(L.Icon,{size:"sm",type:"delete",color:"error"})})]});return Object(W.jsx)(An,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(W.jsx)(In,{to:r,children:u})})},zn=function(e){var t=e.onClick;return Object(W.jsx)(An,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:Object(W.jsxs)(Sn,{children:[Object(W.jsx)(kn,{alt:"PlayStation gamepad symbols",src:xn,onError:Ln,size:"lg"}),Object(W.jsx)(L.Button,{size:"md",color:"primary",variant:"contained",onClick:t,children:"Add custom app"})]})})},Mn=n(550),Nn=n(1440),Pn=n(1663),Gn=n.n(Pn),Un=n(2739),Bn=n.n(Un),Fn=Object(I.default)(L.Card)(lt||(lt=Object(T.a)(["\n  width: 100%;\n  box-sizing: border-box;\n"]))),_n=function(e){var t=e.value,n=e.onValueChange;return Object(W.jsx)(Fn,{children:Object(W.jsx)(Nn.a,{inputProps:{"aria-label":"search"},startAdornment:Object(W.jsx)(Gn.a,{}),endAdornment:t&&Object(W.jsx)(ze.a,{"aria-label":"Clear the search",onClick:function(){return n("")},children:Object(W.jsx)(Bn.a,{})}),onChange:function(e){return n(e.target.value)},placeholder:"e.g Compound",value:t,style:{width:"100%"}})})},qn=I.default.div(jt||(jt=Object(T.a)(["\n  max-width: 650px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: ",";\n  margin-bottom: ",";\n\n  & > p {\n    text-align: center;\n  }\n"])),(function(e){return e.theme.margin.xxl}),(function(e){return e.theme.margin.xxl})),Hn=Object(I.default)(L.Button)(bt||(bt=Object(T.a)(["\n  margin-top: ",";\n  max-width: 300px;\n"])),(function(e){return e.theme.margin.md})),Wn=function(e){var t=e.query,n=e.onWalletConnectSearch;return Object(W.jsxs)(qn,{children:[Object(W.jsxs)(L.Text,{size:"xl",children:["No apps found matching ",Object(W.jsx)("b",{children:t}),". Connect to dApps that haven't yet been integrated with the Safe using the WalletConnect App."]}),Object(W.jsx)(Hn,{onClick:n,size:"md",children:"Search WalletConnect"})]})},Vn=n(1553),Kn=n(131),Jn=n(1536),Yn=n(1539),Xn=Object(I.default)(L.Checkbox)(pt||(pt=Object(T.a)(["\n  margin: 0;\n"]))),Zn=function(){var e=Object(Jn.e)({subscription:{visited:!0}}).visited,t=(null===e||void 0===e?void 0:e.agreementAccepted)?H.p:void 0;return Object(W.jsx)(Yn.a,{component:Xn,label:Object(W.jsx)(L.Text,{size:"xl",children:"This app is not a Gnosis product and I agree to use this app at my own risk."}),name:"agreementAccepted",type:"checkbox",validate:t})},$n=n(1618),Qn=n(1834),ea=function(e){return U(e)?void 0:"Invalid URL"},ta=Object($n.a)({field:"appUrl",updates:{appUrl:function(){var e=Object(A.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!U(t)&&Object(Ht.e)(t),!e.t0){e.next=5;break}return e.next=4,Object(zt.f)(t);case 4:e.t0=e.sent;case 5:if(!(n=e.t0)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),na=function(e){var t=e.onAppInfo,n=e.onLoading,a=e.onError,r=Object(Jn.c)("appUrl",{subscription:{value:!0}}).input.value,c=Object(Qn.a)(r,500);return Object(E.useEffect)((function(){var e=function(){var e=Object(A.a)(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,Object(zt.d)(c);case 4:r=e.sent,t(Object(C.a)({},r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),null===a||void 0===a||a(e.t0);case 11:n(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();U(c)&&e()}),[c,t,a,n]),null},aa=Object(I.default)(Yn.a)(ft||(ft=Object(T.a)(["\n  && {\n    width: 100%;\n  }\n"]))),ra=function(e){var t=e.appList,n=Object(Jn.e)({subscription:{visited:!0}}).visited,a=(null===n||void 0===n?void 0:n.appUrl)?Object(H.d)(H.p,ea,Object(zt.h)(t)):void 0;return Object(W.jsx)(aa,{label:"App URL",name:"appUrl",placeholder:"App URL",type:"text",component:L.TextField,validate:a,autoComplete:"off"})},ca=function(e){var t=e.appInfo,n=e.onCancel,a=Object(Jn.e)({subscription:{valid:!0,validating:!0,visited:!0}}),r=a.valid,c=a.validating,i=a.visited,o=Object(E.useMemo)((function(){var e=(null===i||void 0===i?void 0:i.agreementAccepted)&&(null===i||void 0===i?void 0:i.appUrl);return c||!r||!e||!Object(zt.g)(t)}),[c,r,i,t]);return Object(W.jsx)(q.b.Footer.Buttons,{cancelButtonProps:{onClick:n},confirmButtonProps:{disabled:o,text:"Add"}})},ia=n(20),oa=Object(I.default)(L.TextField)(Ot||(Ot=Object(T.a)(["\n  && {\n    width: 385px;\n  }\n"]))),sa=I.default.div(xt||(xt=Object(T.a)(["\n  display: flex;\n  margin: 36px 0 24px 0;\n\n  img {\n    margin-right: 10px;\n  }\n"]))),ua=Object(I.default)(L.Link)(ht||(ht=Object(T.a)(["\n  inline-size: fit-content;\n"]))),da=I.default.div(mt||(mt=Object(T.a)(["\n  display: flex;\n  margin-bottom: 24px;\n  flex-direction: column;\n  svg {\n    position: relative;\n    top: 4px;\n    left: 4px;\n  }\n"]))),la=I.default.div(gt||(gt=Object(T.a)(["\n  height: 55px;\n  width: 65px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),ja=Object(I.default)(L.Loader)(vt||(vt=Object(T.a)(["\n  margin-right: 15px;\n"]))),ba={appUrl:"",agreementAccepted:!1},pa=Object(zt.e)(),fa=function(e){var t=e.appList,n=e.closeModal,a=e.onAddApp,r=Object(E.useState)(pa),c=Object(k.a)(r,2),i=c[0],o=c[1],s=Object(E.useState)(),u=Object(k.a)(s,2),d=u[0],l=u[1],j=Object(v.h)(),b=Object(E.useState)(!1),p=Object(k.a)(b,2),f=p[0],O=p[1],x=Object(E.useCallback)(Object(A.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(i),j.push({pathname:Object(ia.o)(ia.g.APPS,Object(ia.k)()),search:"?appUrl=".concat(encodeURIComponent(i.url))});case 2:case"end":return e.stop()}}),e)}))),[j,i,a]);Object(E.useEffect)((function(){f&&l(void 0)}),[f]);var h=Object(E.useCallback)((function(e){l(e.message),Object(Nt.c)(Nt.b._903,e.message),o(pa)}),[o]);return Object(W.jsx)(Vn.a,{decorators:[ta],initialValues:ba,onSubmit:x,testId:"add-apps-form",children:function(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(q.b.Body,{children:[Object(W.jsxs)(da,{children:[Object(W.jsx)(L.Text,{size:"xl",as:"span",color:"secondary",children:"Safe Apps are third-party extensions."}),Object(W.jsxs)(ua,{href:"https://docs.gnosis-safe.io/build/sdks/safe-apps",target:"_blank",rel:"noreferrer",title:"Learn more about building Safe Apps",children:[Object(W.jsx)(L.Text,{size:"xl",as:"span",color:"primary",children:"Learn more about building Safe Apps."}),Object(W.jsx)(L.Icon,{size:"sm",type:"externalLink",color:"primary"})]})]}),Object(W.jsx)(ra,{appList:t}),Object(W.jsx)(na,{onAppInfo:o,onLoading:O,onError:h}),Object(W.jsxs)(sa,{children:[f?Object(W.jsx)(la,{children:Object(W.jsx)(ja,{size:"sm"})}):Object(W.jsx)(Kn.a,{alt:"Token image",width:55,src:i.iconUrl}),Object(W.jsx)(oa,{label:"App name",readOnly:!0,meta:{error:d},value:f?"Loading...":i.name===pa.name?"":i.name,onChange:function(){}})]}),Object(W.jsx)(Zn,{})]}),Object(W.jsx)(q.b.Footer,{children:Object(W.jsx)(ca,{appInfo:i,onCancel:n})})]})}})},Oa=n(81),xa=n(93),ha=n(112),ma=n(83),ga=function(){var e=Object(A.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(X.getSafeApps)(_.e,Object(G.b)()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),va=function(){var e=function(){var e=Object(E.useState)([]),t=Object(k.a)(e,2),n=t[0],a=t[1],r=Object(E.useState)(hn.a.NOT_ASKED),c=Object(k.a)(r,2),i=c[0],o=c[1],s=Object(R.d)();return Object(E.useEffect)((function(){var e=function(){var e=Object(A.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(hn.a.LOADING),e.prev=1,e.next=4,ga();case 4:if(!(null===(t=e.sent)||void 0===t?void 0:t.length)){e.next=10;break}a(t.map((function(e){return Object(C.a)(Object(C.a)({},e),{},{fetchStatus:hn.a.SUCCESS,id:String(e.id)})}))),o(hn.a.SUCCESS),e.next=11;break;case 10:throw new Error("Empty apps array \ud83e\udd2c");case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),o(hn.a.ERROR),Object(Nt.c)(Nt.b._902,e.t0.message),s(Object(ha.b)(ma.a.SAFE_APPS_FETCH_ERROR_MSG));case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[s]),{remoteSafeApps:n,status:i}}(),t=e.remoteSafeApps,n=e.status,a=function(){var e=Object(E.useState)([]),t=Object(k.a)(e,2),n=t[0],a=t[1],r=Object(E.useState)(!1),c=Object(k.a)(r,2),i=c[0],o=c[1],s=Object(E.useCallback)((function(e){a(e),Object(xa.e)(zt.a,e.map((function(e){return{url:e.url}})))}),[]);return Object(E.useEffect)((function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a((function(n){var a=Object(Oa.a)(n),r=a.findIndex((function(t){return t.url===e.url}));return t?a.splice(r,1):a[r]=Object(C.a)(Object(C.a)({},e),{},{fetchStatus:hn.a.SUCCESS}),a}))},t=function(){var t=Object(A.a)(y.a.mark((function t(){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(xa.b)(zt.a);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,r=n.map((function(e){return Object(C.a)(Object(C.a)(Object(C.a)({},Object(zt.e)()),e),{},{url:e.url.trim(),id:e.url.trim(),custom:!0})})),a(r),o(!0),r.forEach((function(t){Object(zt.d)(t.url).then((function(t){e(Object(C.a)(Object(C.a)({},t),{},{custom:!0}))})).catch((function(n){e(t,!0),Object(Nt.c)(Nt.b._900,"".concat(t.url,", ").concat(n.message))}))}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),{customSafeApps:n,loaded:i,updateCustomSafeApps:s}}(),r=a.customSafeApps,c=a.updateCustomSafeApps,i=function(e,t){var n=Object(E.useState)([]),a=Object(k.a)(n,2),r=a[0],c=a[1],i=Object(E.useState)(!1),o=Object(k.a)(i,2),s=o[0],u=o[1];return Object(E.useEffect)((function(){var n=function(){var n=Object(A.a)(y.a.mark((function n(){var a,r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(xa.b)(zt.b);case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0=[];case 5:a=n.t0,t===hn.a.SUCCESS&&(r=a.filter((function(t){return e.some((function(e){return e.id===t}))})),c(r),u(!0));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[t,e]),Object(E.useEffect)((function(){t===hn.a.SUCCESS&&Object(xa.e)(zt.b,r)}),[r,t]),{pinnedSafeAppIds:r,loaded:s,updatePinnedSafeApps:c}}(t,n),o=i.pinnedSafeAppIds,s=i.updatePinnedSafeApps,u=n===hn.a.LOADING,d=Object(B.i)().trackEvent,l=Object(E.useMemo)((function(){return[].concat(Object(Oa.a)(t),Object(Oa.a)(r)).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[t,r]),j=Object(E.useMemo)((function(){return t.sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[t]),b=Object(E.useMemo)((function(){return r.filter((function(e){return!t.some((function(t){return t.url===e.url}))})).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[r,t]),p=Object(E.useMemo)((function(){return j.filter((function(e){return o.includes(e.id)}))}),[o,j]),f=Object(E.useCallback)((function(e){var t=[].concat(Object(Oa.a)(r),[e]);c(t)}),[c,r]),O=Object(E.useCallback)((function(e){var t=r.filter((function(t){return t.id!==e}));c(t)}),[c,r]),x=Object(E.useCallback)((function(e){var t=e.id,n=e.name,a=Object(Oa.a)(o);o.includes(t)?(d(Object(C.a)(Object(C.a)({},B.a.PIN),{},{label:n})),a.splice(a.indexOf(t),1)):(d(Object(C.a)(Object(C.a)({},B.a.UNPIN),{},{label:n})),a.push(t)),s(a)}),[d,s,o]);return{allApps:l,appList:j,customApps:b,pinnedSafeApps:p,removeApp:O,togglePin:x,addCustomApp:f,isLoading:u}},wa=n(2740),Ca=n(2741),Sa=n(639),ya=Object(I.default)(Ca.a)(wt||(wt=Object(T.a)(["\n  display: flex;\n  margin-top: ",";\n  margin-bottom: ",";\n  box-shadow: 1px 2px 10px 0 rgba(212, 212, 211, 0.59);\n  box-sizing: border-box;\n  max-width: 100%;\n  padding: 52px 54px;\n  justify-content: center;\n  gap: ",";\n"])),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.sm})),Aa=Object(I.default)(fn.a)(Ct||(Ct=Object(T.a)(["\n  height: 16px;\n  vertical-align: middle;\n"]))),ka=function(){return Object(W.jsxs)(ya,{children:[Object(W.jsx)(Kn.a,{alt:"Info",src:Sa.a}),Object(W.jsxs)(L.Text,{size:"xl",children:["Simply hover over an app and click on the",Object(W.jsx)(Aa,{}),"to bookmark the app here for convenient access"]})]})},Ta=I.default.div(St||(St=Object(T.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),Ea=Object(I.css)(yt||(yt=Object(T.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Ia=I.default.div(At||(At=Object(T.a)(["\n  width: 100%;\n  height: 100%;\n  ",";\n"])),Ea),La=Object(I.default)(on.a.div)(kt||(kt=Object(T.a)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(243px, 1fr));\n  column-gap: 20px;\n  row-gap: 20px;\n  justify-content: space-evenly;\n"]))),Da=I.default.div(Tt||(Tt=Object(T.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n"]))),Ra=Object(I.default)(L.Text)(Et||(Et=Object(T.a)(["\n  width: 100%;\n  margin: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.xl," 0 ").concat(t.margin.md," 0")})),za=Object(I.default)(L.IconText)(It||(It=Object(T.a)(["\n  justify-content: center;\n  margin: 16px 55px 20px 0;\n"]))),Ma=function(){var e=Object(ia.l)(),t=Object(ia.o)(ia.g.APPS,{shortName:Object(G.r)(),safeAddress:e}),n=Object(E.useState)(""),a=Object(k.a)(n,2),r=a[0],c=a[1],i=va(),o=i.allApps,s=i.appList,u=i.removeApp,d=i.isLoading,l=i.pinnedSafeApps,j=i.togglePin,b=i.customApps,p=i.addCustomApp,f=function(e,t){var n=Object(E.useMemo)((function(){return new wa.a(e,{keys:["name","description"],threshold:.2,findAllMatches:!0})}),[e]);return Object(E.useMemo)((function(){return t?n.search(t).map((function(e){return e.item})):e}),[n,e,t])}(s,r),O=Object(E.useState)(null),x=Object(k.a)(O,2),h=x[0],m=x[1],g=Object(Mn.a)(),v=g.open,w=g.toggle,C=g.clickAway,S=0===f.length&&r,y=!!b.length&&!r,A=!r,T=function(e){j(e)};return d||!e?Object(W.jsx)(Ia,{children:Object(W.jsx)(L.Loader,{size:"md"})}):Object(W.jsxs)(Ta,{children:[Object(W.jsx)(L.Menu,{children:Object(W.jsx)(dn.a,{start:"sm",xs:12,children:Object(W.jsx)(L.Breadcrumb,{children:Object(W.jsx)(L.BreadcrumbElement,{iconType:"apps",text:"Apps"})})})}),Object(W.jsxs)(Da,{children:[Object(W.jsx)(_n,{value:r,onValueChange:function(e){return c(e.replace(/\s{2,}/g," "))}}),A&&Object(W.jsxs)(un.a,{title:Object(W.jsx)(L.Text,{color:"placeHolder",strong:!0,size:"md",children:"BOOKMARKED APPS"}),defaultExpanded:!0,children:[0===l.length&&Object(W.jsx)(ka,{}),Object(W.jsx)(sn.a,{children:Object(W.jsx)(La,{"data-testid":"safe_apps__pinned-apps-container",children:l.map((function(e){return Object(W.jsx)(Rn,{to:"".concat(t,"?appUrl=").concat(encodeURI(e.url)),app:e,pinned:!0,onPin:T},e.id)}))})})]}),y&&Object(W.jsx)(un.a,{title:Object(W.jsx)(L.Text,{color:"placeHolder",strong:!0,size:"md",children:"CUSTOM APPS"}),defaultExpanded:!0,children:Object(W.jsx)(sn.a,{children:Object(W.jsx)(La,{children:b.map((function(e){return Object(W.jsx)(Rn,{to:"".concat(t,"?appUrl=").concat(encodeURI(e.url)),app:e,onRemove:m},e.id)}))})})}),Object(W.jsx)(Ra,{color:"placeHolder",strong:!0,size:"md",children:r?"SEARCH RESULTS":"ALL APPS"}),S&&Object(W.jsx)(Wn,{query:r,onWalletConnectSearch:function(){return c("WalletConnect")}}),Object(W.jsx)(sn.a,{children:Object(W.jsxs)(La,{"data-testid":"safe_apps__all-apps-container",children:[!r&&Object(W.jsx)(zn,{onClick:w}),f.map((function(e){return Object(W.jsx)(Rn,{to:"".concat(t,"?appUrl=").concat(encodeURIComponent(e.url)),app:e,onPin:T,pinned:l.some((function(t){return t.id===e.id}))},e.id)}))]})})]}),Object(W.jsx)(za,{color:"secondary",iconSize:"sm",iconType:"info",text:"These are third-party apps, which means they are not owned, controlled, maintained or audited by Gnosis. Interacting with the apps is at your own risk. Any communication within the Apps is for informational purposes only and must not be construed as investment advice to engage in any transaction.",textSize:"sm"}),v&&Object(W.jsxs)(q.b,{title:"Add app",description:"Add a custom app to the list of apps",handleClose:C,children:[Object(W.jsx)(q.b.Header,{onClose:C,children:Object(W.jsx)(q.b.Header.Title,{children:"Add custom app"})}),Object(W.jsx)(fa,{closeModal:C,appList:o,onAddApp:p})]}),h&&Object(W.jsxs)(q.b,{title:"Remove app",description:"Confirm for the app removal",handleClose:function(){return m(null)},children:[Object(W.jsx)(q.b.Header,{onClose:function(){return m(null)},children:Object(W.jsx)(q.b.Header.Title,{children:"Remove app"})}),Object(W.jsx)(q.b.Body,{children:Object(W.jsxs)(L.Text,{size:"xl",children:["This action will remove"," ",Object(W.jsx)(L.Text,{size:"xl",strong:!0,as:"span",children:h.name})," ","from the interface"]})}),Object(W.jsx)(q.b.Footer,{children:Object(W.jsx)(q.b.Footer.Buttons,{cancelButtonProps:{onClick:function(){return m(null)}},confirmButtonProps:{color:"error",onClick:function(){u(h.id),m(null)},text:"Remove"}})})]})]})},Na=function(e){var t=e.onCancel,n=e.onConfirm;return Object(W.jsx)(L.FixedDialog,{body:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(L.Text,{size:"md",children:"You are now accessing third-party apps, which we do not own, control, maintain or audit. We are not liable for any loss you may suffer in connection with interacting with the apps, which is at your own risk. You must read our Terms, which contain more detailed provisions binding on you relating to the apps."}),Object(W.jsx)("br",{}),Object(W.jsxs)(L.Text,{size:"md",children:["I have read and understood the"," ",Object(W.jsx)("a",{href:"https://gnosis-safe.io/terms",rel:"noopener noreferrer",target:"_blank",children:"Terms"})," ","and this Disclaimer, and agree to be bound by them."]})]}),onCancel:t,onConfirm:n,title:"Disclaimer"})},Pa="APPS_LEGAL_CONSENT_RECEIVED";t.default=function(){var e=Object(v.h)(),t=(0,Object(w.a)().getAppUrl)(),n=function(){var e=Object(E.useState)(),t=Object(k.a)(e,2),n=t[0],a=t[1];return Object(E.useEffect)((function(){a(Object(xa.b)(Pa)||!1)}),[]),{consentReceived:n,onConsentReceipt:Object(E.useCallback)((function(){a(!0),Object(xa.e)(Pa,!0)}),[])}}(),a=n.consentReceived,r=n.onConsentReceipt;return t?a?Object(W.jsx)(cn,{appUrl:t}):Object(W.jsx)(Na,{onCancel:function(){return e.goBack()},onConfirm:r}):Object(W.jsx)(Ma,{})}}}]);
//# sourceMappingURL=62.9b9607cf.chunk.js.map