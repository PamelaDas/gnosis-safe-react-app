{"version":3,"sources":["routes/safe/components/Balances/utils/setTokenImgToPlaceholder.ts","routes/safe/components/Balances/assets/token_placeholder.svg","../node_modules/@material-ui/icons/Search.js","../node_modules/@material-ui/core/esm/ListItemIcon/ListItemIcon.js","routes/safe/components/CurrencyDropdown/img/check.svg","routes/safe/components/CurrencyDropdown/style.ts","routes/safe/components/Balances/index.tsx","routes/safe/components/CurrencyDropdown/index.tsx"],"names":["setImageToPlaceholder","event","img","currentTarget","test","src","TokenPlaceholder","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","ListItemIcon","props","ref","classes","className","other","_objectWithoutProperties","context","ListContext","_extends","clsx","root","alignItems","alignItemsFlexStart","withStyles","theme","minWidth","color","palette","action","active","flexShrink","display","marginTop","name","buttonWidth","useDropdownStyles","makeStyles","listItem","maxWidth","boxSizing","listItemSearch","padding","localFlag","backgroundPosition","backgroundRepeat","backgroundSize","height","width","etherFlag","iconLeft","marginRight","iconRight","marginLeft","button","backgroundColor","border","borderRadius","cursor","fontSize","fontWeight","lineHeight","outline","textAlign","opacity","buttonInner","position","borderLeft","borderRight","borderTop","content","right","top","openMenuButton","borderBottom","dropdownItemsScrollWrapper","maxHeight","overflow","search","searchIcon","justifyContent","left","margin","pointerEvents","transform","fill","inputRoot","inputInput","SECTION_NAME","CurrencyDropdown","testId","dispatch","useDispatch","nativeCurrency","getNativeCurrency","useState","anchorEl","setAnchorEl","selectedCurrency","useSelector","currentCurrencySelector","address","currentSafe","searchParams","setSearchParams","currenciesList","availableCurrenciesSelector","tokenImage","logoUri","currenciesListFiltered","filter","currency","toLowerCase","includes","handleClose","onCurrentCurrencyChangedHandler","newCurrencySelectedName","a","fetchSafeTokens","setSelectedCurrency","DropdownListTheme","onClick","type","classNames","Menu","anchorOrigin","horizontal","vertical","elevation","getContentAnchorEl","id","keepMounted","onClose","open","Boolean","transformOrigin","TransitionProps","mountOnEnter","unmountOnExit","MenuItem","InputBase","input","inputProps","onChange","target","placeholder","map","currencyName","sameString","symbol","Img","alt","toLocaleLowerCase","onError","ListItemText","primary","CheckIcon","Collectibles","lazy","Coins","MANAGE_TOKENS_BUTTON_TEST_ID","BALANCE_ROW_TEST_ID","Balances","currentSafeWithNames","safeAddress","featuresEnabled","safeName","erc721Enabled","FEATURES","ERC721","showReceive","setShowReceive","sentToken","setSentToken","matchSafeWithBalancesSection","useRouteMatch","SAFE_SUBSECTION_ROUTE","currentSafeRoutes","generatePrefixedAddressRoutes","shortName","getShortName","balancesSection","url","ASSETS_BALANCES","coins","ASSETS_BALANCES_COLLECTIBLES","collectibles","openReceive","closeReceive","Col","start","sm","xs","iconType","text","end","path","SAFE_ROUTES","exact","render","wrapInSuspense","showReceiveFunds","showSendFunds","SendModal","activeScreenType","isOpen","selectedToken","Modal","description","paperClassName","title","ReceiveModal"],"mappings":"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","file":"static/js/52.42d7bdda.chunk.js","sourcesContent":["import { SyntheticEvent } from 'react'\r\n\r\nimport TokenPlaceholder from 'src/routes/safe/components/Balances/assets/token_placeholder.svg'\r\n\r\nexport const setImageToPlaceholder = (event: SyntheticEvent<HTMLImageElement, Event>): void => {\r\n  const img = event.currentTarget\r\n  if (!/token_placeholder/.test(img.src)) {\r\n    img.src = TokenPlaceholder\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/token_placeholder.c1abe466.svg\";","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n}), 'Search');\n\nexports.default = _default;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport ListContext from '../List/ListContext';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      minWidth: 56,\n      color: theme.palette.action.active,\n      flexShrink: 0,\n      display: 'inline-flex'\n    },\n\n    /* Styles applied to the root element when the parent `ListItem` uses `alignItems=\"flex-start\"`. */\n    alignItemsFlexStart: {\n      marginTop: 8\n    }\n  };\n};\n/**\n * A simple wrapper to apply `List` styles to an `Icon` or `SvgIcon`.\n */\n\nvar ListItemIcon = /*#__PURE__*/React.forwardRef(function ListItemIcon(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  var context = React.useContext(ListContext);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, context.alignItems === 'flex-start' && classes.alignItemsFlexStart),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItemIcon.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component, normally `Icon`, `SvgIcon`,\n   * or a `@material-ui/icons` SVG icon element.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListItemIcon'\n})(ListItemIcon);","export default __webpack_public_path__ + \"static/media/check.bdba8480.svg\";","import { makeStyles } from '@material-ui/core/styles'\r\n\r\nconst buttonWidth = '140px'\r\nexport const useDropdownStyles = makeStyles({\r\n  listItem: {\r\n    maxWidth: (props: any) => (props.buttonWidth ? props.buttonWidth : buttonWidth),\r\n    boxSizing: 'border-box',\r\n  },\r\n  listItemSearch: {\r\n    maxWidth: (props: any) => (props.buttonWidth ? props.buttonWidth : buttonWidth),\r\n    padding: '0',\r\n    boxSizing: 'border-box',\r\n  },\r\n  localFlag: {\r\n    backgroundPosition: '50% 50%',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'contain',\r\n    height: '20px !important',\r\n    width: '26px !important',\r\n  },\r\n  etherFlag: {\r\n    backgroundPosition: '50% 50%',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'contain',\r\n    width: '26px',\r\n    height: '26px',\r\n  },\r\n  iconLeft: {\r\n    marginRight: '10px',\r\n  },\r\n  iconRight: {\r\n    marginLeft: '18px',\r\n  },\r\n  button: {\r\n    backgroundColor: '#e8e7e6',\r\n    border: 'none',\r\n    borderRadius: '3px',\r\n    boxSizing: 'border-box',\r\n    color: '#5d6d74',\r\n    cursor: 'pointer',\r\n    fontSize: '12px',\r\n    fontWeight: 'normal',\r\n    height: '24px',\r\n    lineHeight: '1.33',\r\n    marginRight: '20px',\r\n    minWidth: (props: any) => (props.buttonWidth ? props.buttonWidth : buttonWidth),\r\n    outline: 'none',\r\n    padding: '0',\r\n    textAlign: 'left',\r\n    '&:active': {\r\n      opacity: '0.8',\r\n    },\r\n  },\r\n  buttonInner: {\r\n    boxSizing: 'border-box',\r\n    display: 'block',\r\n    height: '100%',\r\n    lineHeight: '24px',\r\n    padding: '0 22px 0 8px',\r\n    position: 'relative',\r\n    width: '100%',\r\n    '&::after': {\r\n      borderLeft: '5px solid transparent',\r\n      borderRight: '5px solid transparent',\r\n      borderTop: '5px solid #5d6d74',\r\n      content: '\"\"',\r\n      height: '0',\r\n      position: 'absolute',\r\n      right: '8px',\r\n      top: '9px',\r\n      width: '0',\r\n    },\r\n  },\r\n  openMenuButton: {\r\n    '&::after': {\r\n      borderBottom: '5px solid #5d6d74',\r\n      borderLeft: '5px solid transparent',\r\n      borderRight: '5px solid transparent',\r\n      borderTop: 'none',\r\n    },\r\n  },\r\n  dropdownItemsScrollWrapper: {\r\n    maxHeight: '280px',\r\n    overflow: 'auto',\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: '0',\r\n    backgroundColor: '#fff',\r\n    '&:hover': {\r\n      backgroundColor: '#fff',\r\n    },\r\n    marginRight: 0,\r\n    width: '100%',\r\n  },\r\n  searchIcon: {\r\n    alignItems: 'center',\r\n    display: 'flex',\r\n    height: '100%',\r\n    justifyContent: 'center',\r\n    left: '12px',\r\n    margin: '0',\r\n    pointerEvents: 'none',\r\n    position: 'absolute',\r\n    top: '50%',\r\n    transform: 'translateY(-50%)',\r\n    width: '18px',\r\n    '& path': {\r\n      fill: '#b2b5b2',\r\n    },\r\n  },\r\n  inputRoot: {\r\n    color: '#5d6d74',\r\n    fontSize: '14px',\r\n    fontWeight: 'normal',\r\n    lineHeight: '1.43',\r\n    width: '100%',\r\n  },\r\n  inputInput: {\r\n    boxSizing: 'border-box',\r\n    height: '44px',\r\n    padding: '12px 12px 12px 40px',\r\n    width: '100%',\r\n  },\r\n})\r\n","import { Breadcrumb, BreadcrumbElement, Menu } from '@gnosis.pm/safe-react-components'\r\nimport { ReactElement, useState, lazy } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Route, Switch, useRouteMatch } from 'react-router-dom'\r\n\r\nimport Col from 'src/components/layout/Col'\r\nimport Modal from 'src/components/Modal'\r\nimport ReceiveModal from 'src/components/App/ReceiveModal'\r\nimport SendModal from 'src/routes/safe/components/Balances/SendModal'\r\nimport { CurrencyDropdown } from 'src/routes/safe/components/CurrencyDropdown'\r\nimport { currentSafeWithNames } from 'src/logic/safe/store/selectors'\r\nimport { wrapInSuspense } from 'src/utils/wrapInSuspense'\r\nimport { generatePrefixedAddressRoutes, SAFE_ROUTES, SAFE_SUBSECTION_ROUTE } from 'src/routes/routes'\r\nimport { getShortName } from 'src/config'\r\nimport { FEATURES } from '@gnosis.pm/safe-react-gateway-sdk'\r\n\r\nconst Collectibles = lazy(() => import('src/routes/safe/components/Balances/Collectibles'))\r\nconst Coins = lazy(() => import('src/routes/safe/components/Balances/Coins'))\r\n\r\nexport const MANAGE_TOKENS_BUTTON_TEST_ID = 'manage-tokens-btn'\r\nexport const BALANCE_ROW_TEST_ID = 'balance-row'\r\n\r\nenum SECTION_NAME {\r\n  coins = 'Coins',\r\n  collectibles = 'Collectibles',\r\n}\r\n\r\nconst Balances = (): ReactElement => {\r\n  const { address: safeAddress, featuresEnabled, name: safeName } = useSelector(currentSafeWithNames)\r\n  const erc721Enabled = featuresEnabled?.includes(FEATURES.ERC721)\r\n  const [showReceive, setShowReceive] = useState<boolean>(false)\r\n  const [sentToken, setSentToken] = useState<string>('')\r\n\r\n  // Question mark makes matching [SAFE_SUBSECTION_SLUG] optional\r\n  const matchSafeWithBalancesSection = useRouteMatch(`${SAFE_SUBSECTION_ROUTE}?`)\r\n\r\n  const currentSafeRoutes = generatePrefixedAddressRoutes({\r\n    shortName: getShortName(),\r\n    safeAddress,\r\n  })\r\n\r\n  let balancesSection: SECTION_NAME | '' = ''\r\n  switch (matchSafeWithBalancesSection?.url) {\r\n    case currentSafeRoutes.ASSETS_BALANCES:\r\n      balancesSection = SECTION_NAME.coins\r\n      break\r\n    case currentSafeRoutes.ASSETS_BALANCES_COLLECTIBLES:\r\n      balancesSection = SECTION_NAME.collectibles\r\n      break\r\n  }\r\n\r\n  const openReceive = () => setShowReceive(true)\r\n  const closeReceive = () => setShowReceive(false)\r\n  const closeSendFunds = () => setSentToken('')\r\n\r\n  return (\r\n    <>\r\n      {/* Breadcrumbs & Currency Selector */}\r\n      <Menu>\r\n        <Col start=\"sm\" sm={6} xs={12}>\r\n          <Breadcrumb>\r\n            <BreadcrumbElement iconType=\"assets\" text=\"ASSETS\" color=\"primary\" />\r\n            <BreadcrumbElement text={balancesSection} color=\"placeHolder\" />\r\n          </Breadcrumb>\r\n        </Col>\r\n\r\n        <Col end=\"sm\" sm={6} xs={12}>\r\n          {balancesSection === SECTION_NAME.coins && <CurrencyDropdown testId={'balances-currency-dropdown'} />}\r\n        </Col>\r\n      </Menu>\r\n\r\n      {/* Coins & Collectibles sub-router */}\r\n      <Switch>\r\n        <Route\r\n          path={SAFE_ROUTES.ASSETS_BALANCES_COLLECTIBLES}\r\n          exact\r\n          render={() => (erc721Enabled ? wrapInSuspense(<Collectibles />) : null)}\r\n        />\r\n        <Route\r\n          path={SAFE_ROUTES.ASSETS_BALANCES}\r\n          exact\r\n          render={() => wrapInSuspense(<Coins showReceiveFunds={openReceive} showSendFunds={setSentToken} />)}\r\n        />\r\n      </Switch>\r\n\r\n      {/* Send Funds modal */}\r\n      <SendModal activeScreenType=\"sendFunds\" isOpen={!!sentToken} onClose={closeSendFunds} selectedToken={sentToken} />\r\n\r\n      {/* Receive Tokens modal */}\r\n      <Modal\r\n        description=\"Receive Tokens Form\"\r\n        handleClose={closeReceive}\r\n        open={showReceive}\r\n        paperClassName=\"receive-modal\"\r\n        title=\"Receive Tokens\"\r\n      >\r\n        <ReceiveModal safeAddress={safeAddress} safeName={safeName} onClose={closeReceive} />\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Balances\r\n","import InputBase from '@material-ui/core/InputBase'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport { MuiThemeProvider } from '@material-ui/core/styles'\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport classNames from 'classnames'\r\nimport { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport CheckIcon from './img/check.svg'\r\n\r\nimport { setSelectedCurrency } from 'src/logic/currencyValues/store/actions/setSelectedCurrency'\r\nimport { useDropdownStyles } from 'src/routes/safe/components/CurrencyDropdown/style'\r\nimport { availableCurrenciesSelector, currentCurrencySelector } from 'src/logic/currencyValues/store/selectors'\r\nimport { DropdownListTheme } from 'src/theme/mui'\r\nimport { setImageToPlaceholder } from 'src/routes/safe/components/Balances/utils'\r\nimport Img from 'src/components/layout/Img/index'\r\nimport { getNativeCurrency } from 'src/config'\r\nimport { sameString } from 'src/utils/strings'\r\nimport { fetchSafeTokens } from 'src/logic/tokens/store/actions/fetchSafeTokens'\r\nimport { currentSafe } from 'src/logic/safe/store/selectors'\r\n\r\nexport const CurrencyDropdown = ({ testId }: { testId: string }): React.ReactElement | null => {\r\n  const dispatch = useDispatch()\r\n  const nativeCurrency = getNativeCurrency()\r\n  const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null)\r\n  const selectedCurrency = useSelector(currentCurrencySelector)\r\n  const { address } = useSelector(currentSafe)\r\n  const [searchParams, setSearchParams] = useState('')\r\n  const currenciesList = useSelector(availableCurrenciesSelector)\r\n  const tokenImage = nativeCurrency.logoUri\r\n  const classes = useDropdownStyles({})\r\n  const currenciesListFiltered = currenciesList.filter((currency) =>\r\n    currency.toLowerCase().includes(searchParams.toLowerCase()),\r\n  )\r\n\r\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget)\r\n    import('currency-flags/dist/currency-flags.min.css' as string)\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null)\r\n  }\r\n\r\n  const onCurrentCurrencyChangedHandler = async (newCurrencySelectedName: string): Promise<void> => {\r\n    handleClose()\r\n    await dispatch(fetchSafeTokens(address, newCurrencySelectedName))\r\n    dispatch(setSelectedCurrency({ selectedCurrency: newCurrencySelectedName }))\r\n  }\r\n\r\n  if (!selectedCurrency) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <MuiThemeProvider theme={DropdownListTheme}>\r\n      <>\r\n        <button className={classes.button} onClick={handleClick} type=\"button\" data-testid={`${testId}-btn`}>\r\n          <span className={classNames(classes.buttonInner, anchorEl && classes.openMenuButton)}>\r\n            {selectedCurrency}\r\n          </span>\r\n        </button>\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          anchorOrigin={{\r\n            horizontal: 'center',\r\n            vertical: 'bottom',\r\n          }}\r\n          elevation={0}\r\n          getContentAnchorEl={null}\r\n          id=\"customizedMenu\"\r\n          keepMounted\r\n          onClose={handleClose}\r\n          open={Boolean(anchorEl)}\r\n          transformOrigin={{\r\n            horizontal: 'center',\r\n            vertical: 'top',\r\n          }}\r\n          TransitionProps={{ mountOnEnter: true, unmountOnExit: true }}\r\n        >\r\n          <MenuItem className={classes.listItemSearch} key=\"0\">\r\n            <div className={classes.search}>\r\n              <div className={classes.searchIcon}>\r\n                <SearchIcon />\r\n              </div>\r\n              <InputBase\r\n                classes={{\r\n                  root: classes.inputRoot,\r\n                  input: classes.inputInput,\r\n                }}\r\n                inputProps={{ 'aria-label': 'search' }}\r\n                onChange={(event) => setSearchParams(event.target.value)}\r\n                placeholder=\"Search…\"\r\n                value={searchParams}\r\n              />\r\n            </div>\r\n          </MenuItem>\r\n          <div className={classes.dropdownItemsScrollWrapper}>\r\n            {currenciesListFiltered.map((currencyName) => (\r\n              <MenuItem\r\n                className={classes.listItem}\r\n                key={currencyName}\r\n                onClick={() => onCurrentCurrencyChangedHandler(currencyName)}\r\n                value={currencyName}\r\n              >\r\n                <ListItemIcon className={classes.iconLeft}>\r\n                  {sameString(currencyName, nativeCurrency.symbol) ? (\r\n                    <Img\r\n                      alt={nativeCurrency.symbol.toLocaleLowerCase()}\r\n                      onError={setImageToPlaceholder}\r\n                      src={tokenImage}\r\n                      className={classNames(classes.etherFlag)}\r\n                    />\r\n                  ) : (\r\n                    <div\r\n                      className={classNames(\r\n                        classes.localFlag,\r\n                        'currency-flag',\r\n                        'currency-flag-lg',\r\n                        `currency-flag-${currencyName.toLowerCase()}`,\r\n                      )}\r\n                    />\r\n                  )}\r\n                </ListItemIcon>\r\n                <ListItemText primary={currencyName} />\r\n                {currencyName === selectedCurrency ? (\r\n                  <ListItemIcon className={classes.iconRight}>\r\n                    <img alt=\"checked\" src={CheckIcon} />\r\n                  </ListItemIcon>\r\n                ) : null}\r\n              </MenuItem>\r\n            ))}\r\n          </div>\r\n        </Menu>\r\n      </>\r\n    </MuiThemeProvider>\r\n  )\r\n}\r\n"],"sourceRoot":""}